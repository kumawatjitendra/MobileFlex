<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
		xmlns:s="library://ns.adobe.com/flex/spark" title="Book My Cab" >
	
	<fx:Script>
		<![CDATA[
			import mx.rpc.events.FaultEvent;
			import mx.rpc.events.ResultEvent;
			import mx.validators.EmailValidator;
			protected function submit_clickHandler(event:MouseEvent):void
			{
				// TODO Auto-generated method stub
				afterSubmit.includeInLayout = afterSubmit.visible = true;
				registrationPage.includeInLayout = registrationPage.visible = false;
				ro_submit_call.send();
			}
			
			protected function ro_submit_call_resultHandler(event:ResultEvent):void
			{
				// TODO Auto-generated method stub
				submitTxt.text = successTxt;
			}
			
			protected function ro_submit_call_faultHandler(event:FaultEvent):void
			{
				// TODO Auto-generated method stub
				afterSubmit.includeInLayout = afterSubmit.visible = true;
				registrationPage.includeInLayout = registrationPage.visible = false;
				submitTxt.text = errorTxt;
				
			}
			private static const welcomeTxt:String = 'Please ,Fill Following details';
			private static const errorTxt:String = 'Error in Connection';
			private static const successTxt:String ='Thanks for booking ,confirmation details will be informed by sms at your mobile number.'
			
			protected function button1_clickHandler(event:MouseEvent):void
			{
				// TODO Auto-generated method stub
				afterSubmit.includeInLayout = afterSubmit.visible = false;
				registrationPage.includeInLayout = registrationPage.visible = true;
			}
			
			[Embed(source="src/views/alert_png.png")]
			private var errorImg:Class;
			
			[Embed(source="src/views/manual_Autorefresh.png")]
			private var refrImg:Class;
			
			[Embed(source="src/views/arrow.png")]
			private var submitImg:Class;
			
		]]>
	</fx:Script>
	
	<fx:Declarations>
		<s:RemoteObject id="ro_submit_call"  result="ro_submit_call_resultHandler(event)" fault="ro_submit_call_faultHandler(event)"/>
	</fx:Declarations>
	<s:BorderContainer width="100%" height="100%">
		<s:Rect width="100%" height="100%">
			<s:fill>
				<s:SolidColor color="#abcdef"/>
			</s:fill>
		</s:Rect>
		<s:VGroup verticalAlign="middle" verticalCenter="0" horizontalAlign="center" horizontalCenter="0" id="registrationPage" >
			<s:Label text="{welcomeTxt}" />
			<s:Spacer height="10" />
			<s:TextInput id="c_name"  prompt="Name"/>
			<s:TextInput id="c_Phone"  prompt="Mobile Number"/>
			<s:TextInput id="c_source" prompt="Boarding  Point"/>
			<s:TextInput id="c_time" prompt="Boarding  Time"/>
			<s:TextInput id="c_destination" prompt="Alighting Point"/>
			<s:Spacer height="10" />
			<s:Button id="submit" label="Book My Cab" click="submit_clickHandler(event)" icon="{submitImg}"/>
		</s:VGroup>
		<s:VGroup width="100%" verticalAlign="middle" verticalCenter="0" horizontalAlign="center" horizontalCenter="0" id="afterSubmit" includeInLayout="false" visible="false">
			<s:HGroup >
				<s:Image source="{errorImg}"/>
				<s:Label id="submitTxt"  width="100%" textAlign="center"/>
			</s:HGroup>
			
			<s:Image id="tryAgain" click="button1_clickHandler(event)" source="{refrImg}" />
		</s:VGroup>
	</s:BorderContainer>
	
</s:View>
